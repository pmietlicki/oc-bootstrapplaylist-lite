var VimeoState={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3};videojs.Vimeo=videojs.MediaTechController.extend({init:function(b,d,e){videojs.MediaTechController.call(this,b,d,e);if(typeof d.source!="undefined"){for(var c in d.source){b.options()[c]=d.source[c]}}this.player_=b;this.player_el_=document.getElementById(this.player_.id());this.player_.controls(false);this.id_=this.player_.id()+"_vimeo_api";this.el_=videojs.Component.prototype.createEl("iframe",{id:this.id_,className:"vjs-tech",scrolling:"no",marginWidth:0,marginHeight:0,frameBorder:0,webkitAllowFullScreen:"true",mozallowfullscreen:"true",allowFullScreen:"true"});this.player_el_.insertBefore(this.el_,this.player_el_.firstChild);var f=(document.location.protocol==="file:")?"http:":document.location.protocol;this.baseUrl=f+"//player.vimeo.com/video/";this.vimeo={};this.vimeoInfo={};var a=this;this.el_.onload=function(){a.onLoad()};this.startMuted=b.options()["muted"];this.src(b.options()["src"])}});videojs.Vimeo.prototype.dispose=function(){this.vimeo.removeEvent("ready");this.vimeo.api("unload");delete this.vimeo;this.el_.parentNode.removeChild(this.el_);videojs.MediaTechController.prototype.dispose.call(this)};videojs.Vimeo.prototype.src=function(d){this.isReady_=false;var b=/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/;var a=d.match(b);if(a){this.videoId=a[5]}var c={api:1,byline:0,portrait:0,show_title:0,show_byline:0,show_portait:0,fullscreen:1,player_id:this.id_,autoplay:(this.player_.options()["autoplay"])?1:0,loop:(this.player_.options()["loop"])?1:0,color:this.player_.options()["color"]||""};if(c.color.substring(0,1)==="#"){c.color=c.color.substring(1)}this.el_.src=this.baseUrl+this.videoId+"?"+videojs.Vimeo.makeQueryString(c)};videojs.Vimeo.prototype.load=function(){};videojs.Vimeo.prototype.play=function(){this.vimeo.api("play")};videojs.Vimeo.prototype.pause=function(){this.vimeo.api("pause")};videojs.Vimeo.prototype.paused=function(){return this.vimeoInfo.state!==VimeoState.PLAYING&&this.vimeoInfo.state!==VimeoState.BUFFERING};videojs.Vimeo.prototype.currentTime=function(){return this.vimeoInfo.time||0};videojs.Vimeo.prototype.setCurrentTime=function(a){this.vimeo.api("seekTo",a);this.player_.trigger("timeupdate")};videojs.Vimeo.prototype.duration=function(){return this.vimeoInfo.duration||0};videojs.Vimeo.prototype.buffered=function(){return videojs.createTimeRange(0,(this.vimeoInfo.buffered*this.vimeoInfo.duration)||0)};videojs.Vimeo.prototype.volume=function(){return(this.vimeoInfo.muted)?this.vimeoInfo.muteVolume:this.vimeoInfo.volume};videojs.Vimeo.prototype.setVolume=function(a){this.vimeo.api("setvolume",a);this.vimeoInfo.volume=a;this.player_.trigger("volumechange")};videojs.Vimeo.prototype.currentSrc=function(){return this.el_.src};videojs.Vimeo.prototype.muted=function(){return this.vimeoInfo.muted||false};videojs.Vimeo.prototype.setMuted=function(a){if(a){this.vimeoInfo.muteVolume=this.vimeoInfo.volume;this.setVolume(0)}else{this.setVolume(this.vimeoInfo.muteVolume)}this.vimeoInfo.muted=a;this.player_.trigger("volumechange")};videojs.Vimeo.prototype.onReady=function(){this.isReady_=true;this.triggerReady();this.player_.trigger("loadedmetadata");if(this.startMuted){this.setMuted(true);this.startMuted=false}};videojs.Vimeo.prototype.onLoad=function(){if(this.vimeo&&this.vimeo.api){this.vimeo.api("unload");delete this.vimeo}this.vimeo=$f(this.el_);this.vimeoInfo={state:VimeoState.UNSTARTED,volume:1,muted:false,muteVolume:1,time:0,duration:0,buffered:0,url:this.baseUrl+this.videoId,error:null};var a=this;this.vimeo.addEvent("ready",function(b){a.onReady();a.vimeo.addEvent("loadProgress",function(c,d){a.onLoadProgress(c)});a.vimeo.addEvent("playProgress",function(c,d){a.onPlayProgress(c)});a.vimeo.addEvent("play",function(c){a.onPlay()});a.vimeo.addEvent("pause",function(c){a.onPause()});a.vimeo.addEvent("finish",function(c){a.onFinish()});a.vimeo.addEvent("seek",function(c,d){a.onSeek(c)})})};videojs.Vimeo.prototype.onLoadProgress=function(b){var a=!this.vimeoInfo.duration;this.vimeoInfo.duration=b.duration;this.vimeoInfo.buffered=b.percent;this.player_.trigger("progress");if(a){this.player_.trigger("durationchange")}};videojs.Vimeo.prototype.onPlayProgress=function(a){this.vimeoInfo.time=a.seconds;this.player_.trigger("timeupdate")};videojs.Vimeo.prototype.onPlay=function(){this.vimeoInfo.state=VimeoState.PLAYING;this.player_.trigger("play")};videojs.Vimeo.prototype.onPause=function(){this.vimeoInfo.state=VimeoState.PAUSED;this.player_.trigger("pause")};videojs.Vimeo.prototype.onFinish=function(){this.vimeoInfo.state=VimeoState.ENDED;this.player_.trigger("ended")};videojs.Vimeo.prototype.onSeek=function(a){this.vimeoInfo.time=a.seconds;this.player_.trigger("timeupdate");this.player_.trigger("seeked")};videojs.Vimeo.prototype.onError=function(a){this.player_.error=a;this.player_.trigger("error")};videojs.Vimeo.isSupported=function(){return true};videojs.Vimeo.prototype.supportsFullScreen=function(){return false};videojs.Vimeo.canPlaySource=function(a){return(a.type=="video/vimeo")};videojs.Vimeo.makeQueryString=function(a){var c=[];for(var b in a){if(a.hasOwnProperty(b)){c.push(encodeURIComponent(b)+"="+encodeURIComponent(a[b]))}}return c.join("&")};var Froogaloop=(function(){function g(o){return new g.fn.init(o)}var l={},b=false,j=false,n=Array.prototype.slice,e="";g.fn=g.prototype={element:null,init:function(o){if(typeof o==="string"){o=document.getElementById(o)}this.element=o;e=i(this.element.getAttribute("src"));return this},api:function(t,r){if(!this.element||!t){return false}var o=this,q=o.element,p=q.id!==""?q.id:null,u=!a(r)?r:null,s=a(r)?r:null;if(s){k(t,s,p)}m(t,u,q);return o},addEvent:function(p,s){if(!this.element){return false}var o=this,r=o.element,q=r.id!==""?r.id:null;k(p,s,q);if(p!="ready"){m("addEventListener",p,r)}else{if(p=="ready"&&j){s.call(null,q)}}return o},removeEvent:function(p){if(!this.element){return false}var o=this,r=o.element,q=r.id!==""?r.id:null,s=c(p,q);if(p!="ready"&&s){m("removeEventListener",p,r)}}};function m(q,r,s){if(!s||!s.contentWindow||!s.contentWindow.postMessage){return false}var o=s.getAttribute("src").split("?")[0],p=JSON.stringify({method:q,value:r});if(o.substr(0,2)==="//"){o=window.location.protocol+o}s.contentWindow.postMessage(p,o)}function h(o){var q,s;try{q=JSON.parse(o.data);s=q.event||q.method}catch(r){}if(s=="ready"&&!j){j=true}if(o.origin!=e){return false}var u=q.value,w=q.data,t=t===""?null:q.player_id,v=d(s,t),p=[];if(!v){return false}if(u!==undefined){p.push(u)}if(w){p.push(w)}if(t){p.push(t)}return p.length>0?v.apply(null,p):v.call()}function k(o,q,p){if(p){if(!l[p]){l[p]={}}l[p][o]=q}else{l[o]=q}}function d(o,p){if(p&&l[p]){return l[p][o]}else{return l[o]}}function c(o,p){if(p&&l[p]){if(!l[p][o]){return false}l[p][o]=null}else{if(!l[o]){return false}l[o]=null}return true}function i(p){if(p.substr(0,2)==="//"){p=window.location.protocol+p}var s=p.split("/"),r="";for(var q=0,o=s.length;q<o;q++){if(q<3){r+=s[q]}else{break}if(q<2){r+="/"}}return r}function a(o){return !!(o&&o.constructor&&o.call&&o.apply)}function f(o){return toString.call(o)==="[object Array]"}g.fn.init.prototype=g.fn;if(window.addEventListener){window.addEventListener("message",h,false)}else{window.attachEvent("onmessage",h)}return(window.Froogaloop=window.$f=g)})();