(function(){function a(f,g,e){if(!f.addEventListener){f.attachEvent(g,e)}else{f.addEventListener(g,e,true)}}videojs.Youtube=videojs.MediaTechController.extend({init:function(g,j,k){this.player_=g;this["featuresProgressEvents"]=false;this["featuresTimeupdateEvents"]=false;this["featuresPlaybackRate"]=true;videojs.MediaTechController.call(this,g,j,k);this.isIos=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);this.isAndroid=/(Android)/g.test(navigator.userAgent);this.playVideoIsAllowed=!(this.isIos||this.isAndroid);if(this.isIos||this.isAndroid){this.player_.options()["autoplay"]=false}if(typeof j.source!=="undefined"){for(var i in j.source){if(j.source.hasOwnProperty(i)){g.options()[i]=j.source[i]}}}this.player_.options()["playbackRates"]=[];this.userQuality=videojs.Youtube.convertQualityName(g.options()["quality"]);this.playerEl_=g.el();this.playerEl_.className+=" vjs-youtube";this.qualityButton=document.createElement("div");this.qualityButton.setAttribute("class","vjs-quality-button vjs-menu-button vjs-control");this.qualityButton.setAttribute("tabindex",0);var e=document.createElement("div");e.setAttribute("class","vjs-control-content");this.qualityButton.appendChild(e);this.qualityTitle=document.createElement("span");this.qualityTitle.setAttribute("class","vjs-control-text");e.appendChild(this.qualityTitle);if(g.options()["quality"]!=="undefined"){d(this.qualityTitle,g.options()["quality"]||"auto")}var h=document.createElement("div");h.setAttribute("class","vjs-menu");e.appendChild(h);this.qualityMenuContent=document.createElement("ul");this.qualityMenuContent.setAttribute("class","vjs-menu-content");h.appendChild(this.qualityMenuContent);this.id_=this.player_.id()+"_youtube_api";this.el_=videojs.Component.prototype.createEl("iframe",{id:this.id_,className:"vjs-tech",scrolling:"no",marginWidth:0,marginHeight:0,frameBorder:0});this.el_.setAttribute("allowFullScreen","");this.playerEl_.insertBefore(this.el_,this.playerEl_.firstChild);if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var l=Number(RegExp.$1);this.addIframeBlocker(l)}else{if(!/(iPad|iPhone|iPod|Android)/g.test(navigator.userAgent)){this.el_.className+=" onDesktop";this.addIframeBlocker()}}this.parseSrc(g.options()["src"]);this.playOnReady=this.player_.options()["autoplay"]&&this.playVideoIsAllowed;this.forceHTML5=!!(typeof this.player_.options()["forceHTML5"]==="undefined"||this.player_.options()["forceHTML5"]===true);this.updateIframeSrc();var f=this;g.ready(function(){if(f.player_.options()["controls"]){var m=f.playerEl_.querySelectorAll(".vjs-control-bar")[0];if(m){m.appendChild(f.qualityButton)}}if(f.playOnReady&&!f.player_.options()["ytcontrols"]){if(typeof f.player_.loadingSpinner!=="undefined"){f.player_.loadingSpinner.show()}if(typeof f.player_.bigPlayButton!=="undefined"){f.player_.bigPlayButton.hide()}}g.trigger("loadstart")});this.on("dispose",function(){if(this.ytplayer){this.ytplayer.destroy()}if(!this.player_.options()["ytcontrols"]){this.player_.off("waiting",this.bindedWaiting)}this.playerEl_.querySelectorAll(".vjs-poster")[0].style.backgroundImage="none";if(this.el_.parentNode){this.el_.parentNode.removeChild(this.el_)}if(this.qualityButton.parentNode){this.qualityButton.parentNode.removeChild(this.qualityButton)}if(typeof this.player_.loadingSpinner!=="undefined"){this.player_.loadingSpinner.hide()}if(typeof this.player_.bigPlayButton!=="undefined"){this.player_.bigPlayButton.hide()}if(this.iframeblocker){this.playerEl_.removeChild(this.iframeblocker)}})}});videojs.Youtube.prototype.loadThumbnailUrl=function(k,i){var f="https://img.youtube.com/vi/"+k+"/maxresdefault.jpg";var j="https://img.youtube.com/vi/"+k+"/0.jpg";try{var h=new Image();h.onload=function(){if("naturalHeight" in this){if(this.naturalHeight+this.naturalWidth===0){this.onerror();return}}else{if(this.width+this.height===0){this.onerror();return}}i(f)};h.onerror=function(){i(j)};h.src=f}catch(g){i(j)}};videojs.Youtube.prototype.updateIframeSrc=function(){var i=(typeof this.player_.options()["ytFullScreenControls"]!=="undefined"&&!this.player_.options()["ytFullScreenControls"])?0:1;var j={enablejsapi:1,iv_load_policy:3,playerapiid:this.id(),disablekb:1,wmode:"transparent",controls:(this.player_.options()["ytcontrols"])?1:0,fs:i,html5:(this.player_.options()["forceHTML5"])?1:null,playsinline:(this.player_.options()["playsInline"])?1:0,showinfo:0,rel:0,autoplay:(this.playOnReady)?1:0,loop:(this.player_.options()["loop"])?1:0,list:this.playlistId,vq:this.userQuality,origin:window.location.protocol+"//"+window.location.host};var h=window.location.protocol==="file:"||window.location.protocol==="app:";if(h){delete j.origin}for(var k in j){if(j.hasOwnProperty(k)&&(typeof j[k]==="undefined"||j[k]===null)){delete j[k]}}var f=this;if(!this.videoId&&!this.playlistId){this.el_.src="about:blank";setTimeout(function(){f.triggerReady()},500)}else{this.el_.src="https://www.youtube.com/embed/"+(this.videoId||"videoseries")+"?"+videojs.Youtube.makeQueryString(j);if(this.player_.options()["ytcontrols"]){this.player_.controls(false)}else{if(this.videoId&&(typeof this.player_.poster()==="undefined"||this.player_.poster().length===0)){setTimeout(function(){f.loadThumbnailUrl(f.videoId,function(l){f.player_.poster(l)})},100)}}this.bindedWaiting=function(){f.onWaiting()};this.player_.on("waiting",this.bindedWaiting);if(videojs.Youtube.apiReady){this.loadYoutube()}else{videojs.Youtube.loadingQueue.push(this);if(!videojs.Youtube.apiLoading){var e=document.createElement("script");e.onerror=function(l){f.onError(l)};e.src="https://www.youtube.com/iframe_api";var g=document.getElementsByTagName("script")[0];g.parentNode.insertBefore(e,g);videojs.Youtube.apiLoading=true}}}};videojs.Youtube.prototype.onWaiting=function(){if(typeof this.player_.bigPlayButton!=="undefined"){this.player_.bigPlayButton.hide()}};videojs.Youtube.prototype.addIframeBlocker=function(f){this.iframeblocker=videojs.Component.prototype.createEl("div");this.iframeblocker.className="iframeblocker";this.iframeblocker.style.position="absolute";this.iframeblocker.style.left=0;this.iframeblocker.style.right=0;this.iframeblocker.style.top=0;this.iframeblocker.style.bottom=0;if(f&&f<9){this.iframeblocker.style.opacity=0.01}else{this.iframeblocker.style.background="rgba(255, 255, 255, 0.01)"}var e=this;a(this.iframeblocker,"mousemove",function(g){if(!e.player_.userActive()){e.player_.userActive(true)}g.stopPropagation();g.preventDefault()});a(this.iframeblocker,"click",function(){if(e.paused()){e.play()}else{e.pause()}});this.playerEl_.insertBefore(this.iframeblocker,this.el_.nextSibling)};videojs.Youtube.prototype.parseSrc=function(i){this.srcVal=i;if(i){var g=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;var f=i.match(g);if(f&&f[2].length===11){this.videoId=f[2]}else{this.videoId=null}var e=/[?&]list=([^#\&\?]+)/;f=i.match(e);if(f!==null&&f.length>1){this.playlistId=f[1]}else{if(this.playlistId){delete this.playlistId}}var h=/[?&]vq=([^#\&\?]+)/;f=i.match(h);if(f!==null&&f.length>1){this.userQuality=f[1];videojs.Youtube.appendQualityLabel(this.qualityTitle,this.userQuality)}}};videojs.Youtube.prototype.src=function(f){if(typeof f!=="undefined"){this.parseSrc(f);if(this.el_.src==="about:blank"){this.updateIframeSrc();return}delete this.defaultQuality;if(this.videoId!==null){if(this.player_.options()["autoplay"]&&this.playVideoIsAllowed){this.ytplayer.loadVideoById({videoId:this.videoId,suggestedQuality:this.userQuality})}else{this.ytplayer.cueVideoById({videoId:this.videoId,suggestedQuality:this.userQuality})}var e=this;this.loadThumbnailUrl(this.videoId,function(g){e.playerEl_.querySelectorAll(".vjs-poster")[0].style.backgroundImage="url("+g+")";e.player_.poster(g)})}}return this.srcVal};videojs.Youtube.prototype.load=function(){};videojs.Youtube.prototype.play=function(){if(this.videoId!==null){if(!this.player_.options()["ytcontrols"]){this.player_.trigger("waiting")}if(this.isReady_){this.ytplayer.setVolume(this.player_.volume()*100);if(this.volumeVal>0){this.ytplayer.unMute()}else{this.ytplayer.mute()}if(this.playVideoIsAllowed){this.ytplayer.playVideo()}}else{this.playOnReady=true}}};videojs.Youtube.prototype.pause=function(){if(this.ytplayer){this.ytplayer.pauseVideo()}};videojs.Youtube.prototype.paused=function(){return(this.ytplayer)?(this.lastState!==YT.PlayerState.PLAYING&&this.lastState!==YT.PlayerState.BUFFERING):true};videojs.Youtube.prototype.currentTime=function(){return(this.ytplayer&&this.ytplayer.getCurrentTime)?this.ytplayer.getCurrentTime():0};videojs.Youtube.prototype.setCurrentTime=function(e){this.ytplayer.seekTo(e,true);this.player_.trigger("timeupdate");this.player_.trigger("seeking");this.isSeeking=true};videojs.Youtube.prototype.playbackRate=function(){return(this.ytplayer&&this.ytplayer.getPlaybackRate)?this.ytplayer.getPlaybackRate():1};videojs.Youtube.prototype.setPlaybackRate=function(f){if(this.ytplayer&&this.ytplayer.setPlaybackRate){this.ytplayer.setPlaybackRate(f);var e=this;setTimeout(function(){e.player_.trigger("ratechange")},100)}};videojs.Youtube.prototype.duration=function(){return(this.ytplayer&&this.ytplayer.getDuration)?this.ytplayer.getDuration():0};videojs.Youtube.prototype.currentSrc=function(){return this.srcVal};videojs.Youtube.prototype.ended=function(){return(this.ytplayer)?(this.lastState===YT.PlayerState.ENDED):false};videojs.Youtube.prototype.volume=function(){if(this.ytplayer&&isNaN(this.volumeVal)){this.volumeVal=this.ytplayer.getVolume()/100;this.volumeVal=(isNaN(this.volumeVal))?1:this.volumeVal;this.player_.volume(this.volumeVal)}return this.volumeVal};videojs.Youtube.prototype.setVolume=function(e){if(typeof(e)!=="undefined"&&e!==this.volumeVal){this.ytplayer.setVolume(e*100);this.volumeVal=e;this.player_.trigger("volumechange")}};videojs.Youtube.prototype.muted=function(){return this.mutedVal};videojs.Youtube.prototype.setMuted=function(e){if(e){this.storedVolume=this.volumeVal;this.ytplayer.mute();this.player_.volume(0)}else{this.ytplayer.unMute();this.player_.volume(this.storedVolume)}this.mutedVal=e;this.player_.trigger("volumechange")};videojs.Youtube.prototype.buffered=function(){if(this.ytplayer&&this.ytplayer.getVideoBytesLoaded){var f=this.ytplayer.getVideoBytesLoaded();var e=this.ytplayer.getVideoBytesTotal();if(!f||!e){return 0}var i=this.ytplayer.getDuration();var h=(f/e)*i;var g=(this.ytplayer.getVideoStartBytes()/e)*i;return videojs.createTimeRange(g,g+h)}else{return videojs.createTimeRange(0,0)}};videojs.Youtube.prototype.supportsFullScreen=function(){if(typeof this.el_.webkitEnterFullScreen==="function"){if(/Android/.test(videojs.USER_AGENT)||!/Chrome|Mac OS X 10.5/.test(videojs.USER_AGENT)){return true}}return false};videojs.Youtube.isSupported=function(){return true};videojs.Youtube.canPlaySource=function(e){return(e.type==="video/youtube")};videojs.Youtube.canControlVolume=function(){return true};videojs.Youtube.loadingQueue=[];videojs.Youtube.prototype.loadYoutube=function(){var e=this;this.ytplayer=new YT.Player(this.id_,{events:{onReady:function(f){f.target.vjsTech.onReady();e.player_.trigger("ratechange")},onStateChange:function(f){f.target.vjsTech.onStateChange(f.data)},onPlaybackQualityChange:function(f){f.target.vjsTech.onPlaybackQualityChange(f.data)},onError:function(f){f.target.vjsTech.onError(f.data)}}});this.ytplayer.vjsTech=this};videojs.Youtube.makeQueryString=function(e){var g=["modestbranding=1"];for(var f in e){if(e.hasOwnProperty(f)){g.push(f+"="+e[f])}}return g.join("&")};window.onYouTubeIframeAPIReady=function(){var e;while((e=videojs.Youtube.loadingQueue.shift())){e.loadYoutube()}videojs.Youtube.loadingQueue=[];videojs.Youtube.apiReady=true};videojs.Youtube.prototype.onReady=function(){this.isReady_=true;this.triggerReady();this.player_.options()["playbackRates"]=this.ytplayer.getAvailablePlaybackRates();this.player_.controlBar.playbackRateMenuButton.update();this.player_.trigger("loadedmetadata");this.player_.trigger("durationchange");this.player_.trigger("timeupdate");if(typeof this.player_.loadingSpinner!=="undefined"&&!this.isIos&&!this.isAndroid){this.player_.loadingSpinner.hide()}if(this.player_.options()["muted"]){this.setMuted(true)}if(!this.videoId&&this.playlistId){this.videoId=this.ytplayer.getPlaylist()[0];var e=this;this.loadThumbnailUrl(this.videoId,function(f){e.player_.poster(f)})}if(this.playOnReady){this.playOnReady=false;this.play()}};videojs.Youtube.prototype.updateQualities=function(){function g(i){a(i,"click",function(){var l=this.getAttribute("data-val");f.ytplayer.setPlaybackQuality(l);f.userQuality=l;videojs.Youtube.appendQualityLabel(f.qualityTitle,l);var k=f.qualityMenuContent.querySelector(".vjs-selected");if(k){videojs.Youtube.removeClass(k,"vjs-selected")}videojs.Youtube.addClass(this,"vjs-selected")})}var e=this.ytplayer.getAvailableQualityLevels();var f=this;if(e.indexOf(this.userQuality)<0){videojs.Youtube.appendQualityLabel(f.qualityTitle,this.defaultQuality)}if(e.length===0){this.qualityButton.style.display="none"}else{this.qualityButton.style.display="";while(this.qualityMenuContent.hasChildNodes()){this.qualityMenuContent.removeChild(this.qualityMenuContent.lastChild)}for(var h=0;h<e.length;++h){var j=document.createElement("li");j.setAttribute("class","vjs-menu-item");j.setAttribute("data-val",e[h]);videojs.Youtube.appendQualityLabel(j,e[h]);if(e[h]===this.quality){videojs.Youtube.addClass(j,"vjs-selected")}g(j);this.qualityMenuContent.appendChild(j)}}};videojs.Youtube.prototype.onStateChange=function(e){if(e!==this.lastState){switch(e){case -1:this.player_.trigger("durationchange");break;case YT.PlayerState.ENDED:var f=true;if(this.playlistId&&!this.player_.options()["loop"]){f=this.ytplayer.getPlaylistIndex()===0}if(f){if(!this.player_.options()["ytcontrols"]){this.playerEl_.querySelectorAll(".vjs-poster")[0].style.display="block";if(typeof this.player_.bigPlayButton!=="undefined"){this.player_.bigPlayButton.show()}}this.player_.trigger("pause");this.player_.trigger("ended")}break;case YT.PlayerState.PLAYING:this.playerEl_.querySelectorAll(".vjs-poster")[0].style.display="none";this.playVideoIsAllowed=true;this.updateQualities();this.player_.trigger("timeupdate");this.player_.trigger("durationchange");this.player_.trigger("playing");this.player_.trigger("play");if(this.isSeeking){this.player_.trigger("seeked");this.isSeeking=false}break;case YT.PlayerState.PAUSED:this.player_.trigger("pause");break;case YT.PlayerState.BUFFERING:this.player_.trigger("timeupdate");if(!this.player_.options()["ytcontrols"]){this.player_.trigger("waiting")}break;case YT.PlayerState.CUED:break}this.lastState=e}};videojs.Youtube.convertQualityName=function(e){switch(e){case"144p":return"tiny";case"240p":return"small";case"360p":return"medium";case"480p":return"large";case"720p":return"hd720";case"1080p":return"hd1080";case"1440p":return"hd1440";case"2160p":return"hd2160"}return"auto"};videojs.Youtube.parseQualityName=function(e){switch(e){case"tiny":return"144p";case"small":return"240p";case"medium":return"360p";case"large":return"480p";case"hd720":return"720p";case"hd1080":return"1080p";case"hd1440":return"1440p";case"hd2160":return"2160p"}return"auto"};videojs.Youtube.appendQualityLabel=function(f,g){d(f,videojs.Youtube.parseQualityName(g));var e=document.createElement("span");e.setAttribute("class","vjs-hd-label");switch(g){case"hd720":case"hd1080":case"hd1440":d(e,"HD");f.appendChild(e);break;case"hd2160":d(e,"4K");f.appendChild(e);break}};videojs.Youtube.prototype.onPlaybackQualityChange=function(e){if(typeof this.defaultQuality==="undefined"){this.defaultQuality=e;if(typeof this.userQuality!=="undefined"){return}}this.quality=e;videojs.Youtube.appendQualityLabel(this.qualityTitle,e);switch(e){case"medium":this.player_.videoWidth=480;this.player_.videoHeight=360;break;case"large":this.player_.videoWidth=640;this.player_.videoHeight=480;break;case"hd720":this.player_.videoWidth=960;this.player_.videoHeight=720;break;case"hd1080":this.player_.videoWidth=1440;this.player_.videoHeight=1080;break;case"highres":this.player_.videoWidth=1920;this.player_.videoHeight=1080;break;case"small":this.player_.videoWidth=320;this.player_.videoHeight=240;break;case"tiny":this.player_.videoWidth=144;this.player_.videoHeight=108;break;default:this.player_.videoWidth=0;this.player_.videoHeight=0;break}this.player_.trigger("ratechange")};videojs.Youtube.prototype.onError=function(e){this.player_.error(e)};videojs.Youtube.addClass=function(f,e){if((" "+f.className+" ").indexOf(" "+e+" ")===-1){f.className=f.className===""?e:f.className+" "+e}};videojs.Youtube.removeClass=function(e,g){var h,f;if(e.className.indexOf(g)===-1){return}h=e.className.split(" ");for(f=h.length-1;f>=0;f--){if(h[f]===g){h.splice(f,1)}}e.className=h.join(" ")};function d(f,g){if(typeof f==="undefined"){return false}var e=("innerText" in f)?"innerText":"textContent";try{f[e]=g}catch(h){f.setAttribute("innerText",g)}}var b=document.createElement("style");var c=" .vjs-youtube .vjs-poster { background-size: 100%!important; }.vjs-youtube .vjs-poster, .vjs-youtube .vjs-loading-spinner, .vjs-youtube .vjs-big-play-button, .vjs-youtube .vjs-text-track-display{ pointer-events: none !important; }.vjs-youtube.vjs-user-active .iframeblocker { display: none; }.vjs-youtube.vjs-user-inactive .vjs-tech.onDesktop { pointer-events: none; }.vjs-quality-button > div:first-child > span:first-child { position:relative;top:7px }";b.setAttribute("type","text/css");document.getElementsByTagName("head")[0].appendChild(b);if(b.styleSheet){b.styleSheet.cssText=c}else{b.appendChild(document.createTextNode(c))}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(f){var e=this.length>>>0;var g=Number(arguments[1])||0;g=(g<0)?Math.ceil(g):Math.floor(g);if(g<0){g+=e}for(;g<e;g++){if(g in this&&this[g]===f){return g}}return -1}}})();